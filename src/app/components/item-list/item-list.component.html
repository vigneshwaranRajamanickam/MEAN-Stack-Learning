<div class="item-list-container">
    <h2>Items List</h2>
    <ul class="item-list">
        <li *ngFor="let item of items" class="item">
            <div class="item-content" *ngIf="editingItemId !== item._id">
                <img *ngIf="item.image" [src]="item.image" alt="{{ item.name }}" class="product-image">
                <div class="product-details">
                    <h3>{{ item.name }}</h3>
                    <p>{{ item.description }}</p>
                </div>
            </div>

            <div class="item-edit-form" *ngIf="editingItemId === item._id">
                <div class="edit-form-group">
                    <input type="text" [(ngModel)]="editName" placeholder="Name" class="edit-input">
                </div>
                <div class="edit-form-group">
                    <input type="text" [(ngModel)]="editDescription" placeholder="Description" class="edit-input">
                </div>

                <div class="edit-form-group image-upload-group">
                    <label>Change Image</label>
                    <div class="upload-controls">
                        <label for="edit-file-upload-{{item._id}}" class="custom-file-upload btn">
                            <span *ngIf="!isUploading">üìÇ Choose New</span>
                            <span *ngIf="isUploading">‚è≥ Uploading...</span>
                        </label>
                        <input id="edit-file-upload-{{item._id}}" type="file" (change)="onFileSelected($event)"
                            accept="image/*" class="hidden-input">

                        <input type="text" [(ngModel)]="editImage" placeholder="Or Paste URL" class="url-input">
                    </div>
                </div>

                <div *ngIf="editImage" class="edit-preview">
                    <img [src]="editImage" alt="Preview">
                </div>
            </div>

            <div class="item-actions">
                <button *ngIf="editingItemId !== item._id" (click)="startEdit(item)" class="edit-btn">Edit</button>
                <button *ngIf="editingItemId !== item._id" (click)="deleteItem(item._id)"
                    class="delete-btn">Delete</button>

                <button *ngIf="editingItemId === item._id" (click)="saveEdit()" class="save-btn">Save</button>
                <button *ngIf="editingItemId === item._id" (click)="cancelEdit()" class="cancel-btn">Cancel</button>
            </div>
        </li>
    </ul>
    <p *ngIf="items.length === 0">No items found.</p>
</div>