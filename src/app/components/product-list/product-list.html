<div class="product-list-container">
    <div class="header">
        <h2>Products</h2>
        <div class="header-actions">
            <button class="btn-reset" (click)="resetCollections()">Reset DB</button>
            <button class="btn-add" (click)="openAddModal()">+ Add Product</button>
        </div>
    </div>

    <div class="product-grid">
        <div class="product-card" *ngFor="let item of items">
            <div class="product-image-container">
                <img *ngIf="item.image" [src]="item.image" alt="{{ item.name }}" class="product-image"
                    (error)="item.image = null">
                <div *ngIf="!item.image" class="no-image-placeholder">
                    <span>No Image</span>
                </div>

                <!-- Hover Actions -->
                <div class="card-actions">
                    <button class="action-btn edit" (click)="startEdit(item)">‚úèÔ∏è Edit</button>
                    <button class="action-btn delete" (click)="deleteItem(item)">üóëÔ∏è Delete</button>
                </div>
            </div>
            <div class="product-details">
                <div class="product-header">
                    <h3>{{ item.name }}</h3>
                    <span class="price-tag">${{ item.price | number:'1.2-2' }}</span>
                </div>
                <p>{{ item.description }}</p>
            </div>
        </div>
    </div>

    <div *ngIf="items.length === 0" class="no-items">
        <p>No products found.</p>
    </div>

    <!-- Add Product Modal -->
    <div class="modal-backdrop" *ngIf="isAddModalOpen" (click)="closeAddModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h3>{{ selectedItem ? 'Edit Product' : 'Add New Product' }}</h3>
                <button class="close-btn" (click)="closeAddModal()">√ó</button>
            </div>
            <div class="modal-body">
                <app-item-add [item]="selectedItem" (itemAdded)="onItemAdded()"></app-item-add>
            </div>
        </div>
    </div>
</div>